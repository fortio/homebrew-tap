# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Proxy < Formula
  desc "TLS ingress reverse proxy and multiplexer with autocert and simple routing rules"
  homepage "https://fortio.org/"
  version "1.13.1"
  license "Apache-2.0"

  on_macos do
    if Hardware::CPU.arm?
      url "https://github.com/fortio/proxy/releases/download/v1.13.1/proxy_1.13.1_Mac_arm64.tar.gz"
      sha256 "c5e5333c0e40bcb74354ef8183ec569c02bcab4ef41af88ff5a20b599fbbf97f"

      def install
        bin.install "proxy"
      end
    end
    if Hardware::CPU.intel?
      url "https://github.com/fortio/proxy/releases/download/v1.13.1/proxy_1.13.1_Mac_x86_64.tar.gz"
      sha256 "1685b621701df6fd11033a202148894e07a12fe63b01094d4d23b83bba4c3229"

      def install
        bin.install "proxy"
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel?
      url "https://github.com/fortio/proxy/releases/download/v1.13.1/proxy_1.13.1_Linux_x86_64.tar.gz"
      sha256 "38998472e65f61f35bfa20ab0a32b1a03fa9015023a3f86b9b983cf92be8613b"

      def install
        bin.install "proxy"
      end
    end
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/fortio/proxy/releases/download/v1.13.1/proxy_1.13.1_Linux_arm64.tar.gz"
      sha256 "039bb67b1381bf74bbff13f747e1e6e52e7a2e1cbaecaae2813c570f550e3a60"

      def install
        bin.install "proxy"
      end
    end
  end

  test do
    assert_match version.to_s, shell_output("#{bin}/proxy -version")
  end
end
