# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Proxy < Formula
  desc "TLS ingress reverse proxy and multiplexer with autocert and simple routing rules"
  homepage "https://fortio.org/"
  version "1.17.0"
  license "Apache-2.0"

  on_macos do
    if Hardware::CPU.arm?
      url "https://github.com/fortio/proxy/releases/download/v1.17.0/proxy_1.17.0_darwin_arm64.tar.gz"
      sha256 "c97375986dd5bcfea3798c9772277565c1dba61756677efc6ad93b5b97db6f55"

      def install
        bin.install "proxy"
      end
    end
    if Hardware::CPU.intel?
      url "https://github.com/fortio/proxy/releases/download/v1.17.0/proxy_1.17.0_darwin_amd64.tar.gz"
      sha256 "1f82a0c2fce8ae2310912ba852a43c716639cd990db0d1534528d0a10a4bcd01"

      def install
        bin.install "proxy"
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel?
      url "https://github.com/fortio/proxy/releases/download/v1.17.0/proxy_1.17.0_linux_amd64.tar.gz"
      sha256 "18558b7f92650a3fe68b28b3875a2253b7e24dc82d80917aef16b08cd6a85cbb"

      def install
        bin.install "proxy"
      end
    end
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/fortio/proxy/releases/download/v1.17.0/proxy_1.17.0_linux_arm64.tar.gz"
      sha256 "781f167b9f7ffa9b87b4d502ddc23b5eedd751f9d44a16b73f0eca9395753d47"

      def install
        bin.install "proxy"
      end
    end
  end

  test do
    assert_match version.to_s, shell_output("#{bin}/proxy -version")
  end
end
