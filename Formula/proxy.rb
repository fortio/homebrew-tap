# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Proxy < Formula
  desc "TLS ingress reverse proxy and multiplexer with autocert and simple routing rules"
  homepage "https://fortio.org/"
  version "1.19.7"
  license "Apache-2.0"

  on_macos do
    on_intel do
      url "https://github.com/fortio/proxy/releases/download/v1.19.7/proxy_1.19.7_darwin_amd64.tar.gz"
      sha256 "ba958d01de3ef57f9aab1e1108eab92f4581281018981cfc5b83e7ec4a434c9a"

      def install
        bin.install "proxy"
      end
    end
    on_arm do
      url "https://github.com/fortio/proxy/releases/download/v1.19.7/proxy_1.19.7_darwin_arm64.tar.gz"
      sha256 "191d0c09f9bbe564df4d2952502fea112ac728ae945caf473d39a8db45e8f651"

      def install
        bin.install "proxy"
      end
    end
  end

  on_linux do
    on_intel do
      if Hardware::CPU.is_64_bit?
        url "https://github.com/fortio/proxy/releases/download/v1.19.7/proxy_1.19.7_linux_amd64.tar.gz"
        sha256 "e24b8a20bf08ae85ad7a60d38ba1df4a5869e1bdd9e36783b76debd7d1689c1d"

        def install
          bin.install "proxy"
        end
      end
    end
    on_arm do
      if Hardware::CPU.is_64_bit?
        url "https://github.com/fortio/proxy/releases/download/v1.19.7/proxy_1.19.7_linux_arm64.tar.gz"
        sha256 "311a72d47168daca81c544340fcdfbb4663fec0c4abf670887df0db37bcc9a3f"

        def install
          bin.install "proxy"
        end
      end
    end
  end

  test do
    assert_match version.to_s, shell_output("#{bin}/proxy -version")
  end
end
