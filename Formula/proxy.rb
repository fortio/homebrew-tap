# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Proxy < Formula
  desc "TLS ingress reverse proxy and multiplexer with autocert and simple routing rules"
  homepage "https://fortio.org/"
  version "1.3.6"
  license "Apache-2.0"

  on_macos do
    if Hardware::CPU.arm?
      url "https://github.com/fortio/proxy/releases/download/v1.3.6/proxy_1.3.6_Mac_arm64.tar.gz"
      sha256 "988116daab47d6ea4a0512ea2411bcc1cd4df3b5d475d540812f971f6f59697a"

      def install
        bin.install "proxy"
      end
    end
    if Hardware::CPU.intel?
      url "https://github.com/fortio/proxy/releases/download/v1.3.6/proxy_1.3.6_Mac_x86_64.tar.gz"
      sha256 "5a617d54d840b4e4489890df3acfd2d73bc169468b603c31030ac6bf894b8724"

      def install
        bin.install "proxy"
      end
    end
  end

  on_linux do
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/fortio/proxy/releases/download/v1.3.6/proxy_1.3.6_Linux_arm64.tar.gz"
      sha256 "895c7602783a694c7a73742dc3717ec036d3347445766bde1c0415a253d0fa7c"

      def install
        bin.install "proxy"
      end
    end
    if Hardware::CPU.intel?
      url "https://github.com/fortio/proxy/releases/download/v1.3.6/proxy_1.3.6_Linux_x86_64.tar.gz"
      sha256 "39dcd8155848249d7cd6f641c5c1e7db5bdf25fddb0f95e0dbf15725aa9046e3"

      def install
        bin.install "proxy"
      end
    end
  end

  test do
    assert_match version.to_s, shell_output("#{bin}/proxy -version")
  end
end
